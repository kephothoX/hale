<h2 mat-dialog-title>Open File</h2>
<mat-dialog-content class="mat-typography">
    <mat-card *ngIf="File">
        <img [src]="FileURL" mat-card-lg-image alt="HALE Health Servicea" class="img-fluid object-fit-fill rounded mx-auto d-block"/>

        <a href="{{ File.dest_url }}">
            <button mat-raised-button color="primary" class="text-white">
                <mat-icon class="material-symbols-outlined">download</mat-icon>
                Download
            </button>
        </a>
        <mat-card-footer>

            <h6 class="fs-6 align-left">Created At:  <span class="text-primary">{{ File.object.created_at | date }}</span> </h6>
            <h6 class="fs-6 align-left">Folder:  <span class="text-primary">{{ File.object.folder }}</span> </h6>
            <h6 class="fs-6 align-left">ID: <span class="text-primary">{{ File.object.id }}</span> </h6>

            <h6 class="fs-6 align-left">Created By:  <span class="text-primary">{{ File.object.metadata.created_by  }}</span> </h6>
     
            <h6 class="fs-6 align-left">Format:  <span class="text-primary">{{ File.object.metadata_protected.format }}</span> </h6>


            <h6 class="fs-6 align-left">Name:  <span class="text-primary">{{ File.object.name }}</span> </h6>

            <h6 class="fs-6 align-left">Size:  <span class="text-primary">{{ File.object.size }}</span> </h6>
            <h6 class="fs-6 align-left">Type <span class="text-primary">{{ File.object.type }}</span> </h6>
            <h6 class="fs-6 align-left">Updated At:  <span class="text-primary">{{ File.object.updated_at | date }}</span> </h6>


        </mat-card-footer> 

    </mat-card>
    <mat-card class="card mat-elevation-z6">
        <mat-card-content>
            <form [formGroup]="filePasswordForm" (ngSubmit)="ngOnSubmit()">
                <mat-form-field appearance="fill" class="p-1 form-control">
                    <mat-label>Password</mat-label>
                    <mat-hint align="end">password to open file</mat-hint>
                    <mat-icon matPrefix class="material-symbols-outline">info</mat-icon>
                    <input type="password" matInput formControlName="password" />
                </mat-form-field>

                <div class="spacer"></div>

                <mat-card-actions class="align-buttons-center">
                    <button type="submit" color="primary" class="text-white" mat-raised-button
                        [disabled]="!filePasswordForm.valid">
                        <mat-icon class="material-symbols-outlined">send</mat-icon>
                        Open File
                    </button>

                    <button type="reset" mat-raised-button color="warn" class="text-white" (click)="resetForm()">
                        <mat-icon class="material-symbols-outlined">cancel</mat-icon>
                        Clear
                    </button>

                </mat-card-actions>
            </form>
        </mat-card-content>
    </mat-card>

    <mat-card class="card mat-elevation-z4">
        <div class="accordion" id="accordionExample">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
                        aria-expanded="true" aria-controls="collapseOne">
                        Remove Password From File
                    </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <mat-card-content>
                            <form [formGroup]="removePasswordForm" (ngSubmit)="ngOnRemovePassword()">
                                <mat-form-field appearance="fill" class="p-1 form-control">
                                    <mat-label>Password</mat-label>
                                    <mat-hint align="end">password to open file</mat-hint>
                                    <mat-icon matPrefix class="material-symbols-outline">info</mat-icon>
                                    <input type="password" matInput formControlName="password" />
                                </mat-form-field>
                    
                                <div class="spacer"></div>
                    
                                <mat-card-actions class="align-buttons-center">
                                    <button type="submit" color="primary" class="text-white" mat-raised-button
                                        [disabled]="!removePasswordForm.valid">
                                        <mat-icon class="material-symbols-outlined">send</mat-icon>
                                        Remove Password
                                    </button>
                    
                                    <button type="reset" mat-raised-button color="warn" class="text-white" (click)="resetForm()">
                                        <mat-icon class="material-symbols-outlined">cancel</mat-icon>
                                        Clear
                                    </button>
                    
                                </mat-card-actions>
                            </form>
                        </mat-card-content>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        Change Filename
                    </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <<mat-card-content>
                            <form [formGroup]="changeFilenameForm" (ngSubmit)="ngOnChangeFilename()">
                                <mat-form-field appearance="fill" class="p-1 form-control">
                                    <mat-label>Filename</mat-label>
                                    <mat-hint align="end">New filename</mat-hint>
                                    <mat-icon matPrefix class="material-symbols-outline">info</mat-icon>
                                    <input type="text" matInput formControlName="name" />
                                </mat-form-field>
                    
                                <div class="spacer"></div>
                    
                                <mat-card-actions class="align-buttons-center">
                                    <button type="submit" color="primary" class="text-white" mat-raised-button
                                        [disabled]="!changeFilenameForm.valid">
                                        <mat-icon class="material-symbols-outlined">send</mat-icon>
                                        Change Filename
                                    </button>
                    
                                    <button type="reset" mat-raised-button color="warn" class="text-white" (click)="resetForm()">
                                        <mat-icon class="material-symbols-outlined">cancel</mat-icon>
                                        Clear
                                    </button>
                    
                                </mat-card-actions>
                            </form>
                        </mat-card-content>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                        Protect File With Password
                    </button>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <mat-card-content>
                            <form [formGroup]="addPasswordForm" (ngSubmit)="ngOnAddPassword()">
                                <mat-form-field appearance="fill" class="p-1 form-control">
                                    <mat-label>Password</mat-label>
                                    <mat-hint align="end">password to open file</mat-hint>
                                    <mat-icon matPrefix class="material-symbols-outline">info</mat-icon>
                                    <input type="password" matInput formControlName="password" />
                                </mat-form-field>
                    
                                <div class="spacer"></div>
                    
                                <mat-card-actions class="align-buttons-center">
                                    <button type="submit" color="primary" class="text-white" mat-raised-button
                                        [disabled]="!addPasswordForm.valid">
                                        <mat-icon class="material-symbols-outlined">send</mat-icon>
                                        Add Password
                                    </button>
                    
                                    <button type="reset" mat-raised-button color="warn" class="text-white" (click)="resetForm()">
                                        <mat-icon class="material-symbols-outlined">cancel</mat-icon>
                                        Clear
                                    </button>
                    
                                </mat-card-actions>
                            </form>
                        </mat-card-content>
                    </div>
                </div>
            </div>
        </div>
    </mat-card>


</mat-dialog-content>
<mat-dialog-actions align="end">
    <button mat-raised-button color="warn" class="text-white" [mat-dialog-close]="true" cdkFocusInitial>
        <mat-icon class="material-symbols-outlined">exit_to_app</mat-icon>
        Exit
    </button>
</mat-dialog-actions>